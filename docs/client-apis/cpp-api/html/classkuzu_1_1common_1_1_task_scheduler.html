<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kuzu: kuzu::common::TaskScheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="kuzu-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Kuzu
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>kuzu</b></li><li class="navelem"><b>common</b></li><li class="navelem"><a class="el" href="classkuzu_1_1common_1_1_task_scheduler.html">TaskScheduler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classkuzu_1_1common_1_1_task_scheduler-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">kuzu::common::TaskScheduler Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="task__scheduler_8h_source.html">task_scheduler.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6ce831486d10a80d762cd78ea40b3291"><td class="memItemLeft" align="right" valign="top"><a id="a6ce831486d10a80d762cd78ea40b3291" name="a6ce831486d10a80d762cd78ea40b3291"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>TaskScheduler</b> (uint64_t numThreads)</td></tr>
<tr class="separator:a6ce831486d10a80d762cd78ea40b3291"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3af14ad0e7146c0841fc381e79e6291b"><td class="memItemLeft" align="right" valign="top"><a id="a3af14ad0e7146c0841fc381e79e6291b" name="a3af14ad0e7146c0841fc381e79e6291b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>scheduleTaskAndWaitOrError</b> (const std::shared_ptr&lt; <a class="el" href="classkuzu_1_1common_1_1_task.html">Task</a> &gt; &amp;task)</td></tr>
<tr class="separator:a3af14ad0e7146c0841fc381e79e6291b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c67bf73182acc5f788bd2ec6db0a4fa"><td class="memItemLeft" align="right" valign="top"><a id="a9c67bf73182acc5f788bd2ec6db0a4fa" name="a9c67bf73182acc5f788bd2ec6db0a4fa"></a>
std::shared_ptr&lt; <a class="el" href="structkuzu_1_1common_1_1_scheduled_task.html">ScheduledTask</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>scheduleTask</b> (const std::shared_ptr&lt; <a class="el" href="classkuzu_1_1common_1_1_task.html">Task</a> &gt; &amp;task)</td></tr>
<tr class="separator:a9c67bf73182acc5f788bd2ec6db0a4fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a371d5ae5adc68cf2866d22cf48fc243b"><td class="memItemLeft" align="right" valign="top"><a id="a371d5ae5adc68cf2866d22cf48fc243b" name="a371d5ae5adc68cf2866d22cf48fc243b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>waitAllTasksToCompleteOrError</b> ()</td></tr>
<tr class="separator:a371d5ae5adc68cf2866d22cf48fc243b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8660e60e25d9d3f5b89bd002cd9ae19b"><td class="memItemLeft" align="right" valign="top"><a id="a8660e60e25d9d3f5b89bd002cd9ae19b" name="a8660e60e25d9d3f5b89bd002cd9ae19b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>waitUntilEnoughTasksFinish</b> (int64_t minimumNumTasksToScheduleMore)</td></tr>
<tr class="separator:a8660e60e25d9d3f5b89bd002cd9ae19b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6510d97292a1b8ebdefbd8eeec66a78"><td class="memItemLeft" align="right" valign="top"><a id="ac6510d97292a1b8ebdefbd8eeec66a78" name="ac6510d97292a1b8ebdefbd8eeec66a78"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>errorIfThereIsAnException</b> ()</td></tr>
<tr class="separator:ac6510d97292a1b8ebdefbd8eeec66a78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d7d7b2390350f593db3faa59bd1ca62"><td class="memItemLeft" align="right" valign="top"><a id="a7d7d7b2390350f593db3faa59bd1ca62" name="a7d7d7b2390350f593db3faa59bd1ca62"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isTaskQueueEmpty</b> ()</td></tr>
<tr class="separator:a7d7d7b2390350f593db3faa59bd1ca62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0271de4f7b940fd6d632698fda6887d4"><td class="memItemLeft" align="right" valign="top"><a id="a0271de4f7b940fd6d632698fda6887d4" name="a0271de4f7b940fd6d632698fda6887d4"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>getNumTasks</b> ()</td></tr>
<tr class="separator:a0271de4f7b940fd6d632698fda6887d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classkuzu_1_1common_1_1_task_scheduler.html">TaskScheduler</a> is a library that manages a set of worker threads that can execute tasks that are put into a task queue. Each task accepts a maximum number of threads. Users of <a class="el" href="classkuzu_1_1common_1_1_task_scheduler.html">TaskScheduler</a> schedule tasks to be executed by calling schedule functions, e.g., scheduleTask or scheduleTaskAndWaitOrError. New tasks are put at the end of the queue. Workers grab the first task from the beginning of the queue that they can register themselves to work on. Any task that is completed is removed automatically from the queue. If there is a task that raises an exception, the worker threads catch it and store it with the tasks. The user thread that is waiting on the completion of the task (or tasks) will throw the exception (the user thread could be waiting on a tasks through a function that waits, e.g., scheduleTaskAndWaitOrError or waitAllTasksToCompleteOrError.</p>
<p>Currently there are two ways the <a class="el" href="classkuzu_1_1common_1_1_task_scheduler.html">TaskScheduler</a> can be used: (1) Schedule a set of tasks T1, ..., Tk, and wait for all of them to be completed or error if any one them has raised an exception (but only the exception of one (the earliest scheduled) task will be raised. We do not currently re-throw multiple exceptions from multiple tasks. Ex: schedule(T1); ...; schedule(Tk); waitAllTasksToCompleteOrError(); (2) Schedule one task T and wait for T to finish or error if there was an exception raised by one of the threads working on T that errored. This is simply done by the call: scheduleTaskAndWaitOrError(T);</p>
<p><a class="el" href="classkuzu_1_1common_1_1_task_scheduler.html">TaskScheduler</a> guarantees that workers will register themselves to tasks in FIFO order. However this does not guarantee that the tasks will be completed in FIFO order: a long running task that is not accepting more registration can stay in the queue for an unlimited time until completion. </p>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li>src/include/common/task_system/<a class="el" href="task__scheduler_8h_source.html">task_scheduler.h</a></li>
<li>src/common/task_system/task_scheduler.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
